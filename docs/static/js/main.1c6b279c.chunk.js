(window.webpackJsonpboot_strap=window.webpackJsonpboot_strap||[]).push([[0],{18:function(e,t,a){e.exports=a(28)},23:function(e,t,a){},28:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(11),i=a.n(o),l=(a(23),a(1)),d=a.n(l),c=a(5),s=a(4),u=a(12),y=a(13),p=a(17),w=a(14),f=a(2),m=a(16),h=a(15),v=(a(25),{apiKey:"AIzaSyBRZfJbvuAB1AlpqHtOmHknBAy_vDVMMdU",authDomain:"radio-2178f.firebaseapp.com",databaseURL:"https://radio-2178f.firebaseio.com",projectId:"radio-2178f",appId:"1:909358501007:web:1163818a64b97461f674fa"}),b="radio-videos",g="videoId",x=function(){return r.a.createElement("span",{className:"w3-animate-spin"},"\ud83d\ude2e")},E=function(e){function t(){var e;Object(u.a)(this,t),(e=Object(p.a)(this,Object(w.a)(t).call(this))).state={videoIds:[],url:"",current:"",loadingVideoIds:!0,playerReady:!1,isAlreadyMounted:!1},e.playNext=function(t,a){var n=e.state.videoIds;if(n.length){if(e.state.current)if(t){var r=n.findIndex(function(e){return e===t});r>=0&&(n[0]=t,n[r]=e.state.current)}else n=n.filter(function(t){return t!==e.state.current});e.setState({current:n[0],videoIds:n},function(){window.ytPlayer.loadVideoById(n[0]),a&&a()})}},e.onPlayerReady=function(t){e.setState({playerReady:!0}),e.playNext()},e.onPlayerStateChange=function(t){localStorage.debug&&console.log("state-change",t),t.data===window.YT.PlayerState.ENDED&&e.playNext()},e.loadVideoList=Object(s.a)(d.a.mark(function t(){var a,n;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=[],!e.appHandle){t.next=7;break}return n=e.appHandle.firestore(),t.next=5,n.collection(b).get();case 5:t.sent.forEach(function(e){var t=e.data();g in t&&a.push(t[g])});case 7:return t.abrupt("return",[].concat(a,Object(c.a)(e.state.videoIds)));case 8:case"end":return t.stop()}},t)})),e.extractVideoId=function(){if(e.state.url){var t=e.state.url.match(/https:\/\/www.youtube.com\/watch\?v=([0-9A-Za-z_]{5,})/);if(t)return t[1]}return""},e.handleEnter=function(){var t=Object(s.a)(d.a.mark(function t(a){var n,r,o,i;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.keyCode,r=e.extractVideoId(),13!==n||!r){t.next=11;break}if(!e.appHandle){t.next=10;break}return o=e.appHandle.firestore(),(i={on:Date.now()})[g]=r,t.next=9,o.collection(b).add(i);case 9:console.log("video-added to db - ".concat(r));case 10:e.setState({videoIds:[].concat(Object(c.a)(e.state.videoIds),[r]),url:""},function(){!e.state.current&&e.state.playerReady&&e.playNext()});case 11:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),e.setPlayBack=function(t){e.state.current===t?window.ytPlayer.getPlayerState()===window.YT.PlayerState.PAUSED||window.ytPlayer.getPlayerState()===window.YT.PlayerState.UNSTARTED?window.ytPlayer.playVideo():window.ytPlayer.pauseVideo():(window.ytPlayer.pauseVideo(),e.playNext(t,function(){window.ytPlayer.playVideo()}))};var a=!!localStorage.isAlreadyMounted;return e.state.isAlreadyMounted=a,a||(localStorage.isAlreadyMounted=!0,e.appHandle=h.initializeApp(v),e.cleanUp=e.cleanUp.bind(Object(f.a)(e)),window.addEventListener("beforeunload",e.cleanUp)),e}return Object(m.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.appHandle&&(this.loadVideoList().then(function(t){e.setState({videoIds:t,loadingVideoIds:!1},function(){var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api",document.body.append(e)})}),window.onYouTubeIframeAPIReady=function(){window.ytPlayer=new window.YT.Player("youtube-player",{height:"400",width:"600",events:{onReady:e.onPlayerReady,onStateChange:e.onPlayerStateChange}})})}},{key:"cleanUp",value:function(){window.ytPlayer&&window.ytPlayer.destroy(),this.appHandle&&(this.appHandle.delete(),delete localStorage.isAlreadyMounted),window.removeEventListener("beforeunload",this.cleanUp)}},{key:"render",value:function(){var e=this;return this.state.isAlreadyMounted?r.a.createElement("div",{className:"w3-display-middle w3-panel w3-round w3-xxlarge w3-aqua w3-text-grey w3-wide"},"Already opened in some tab :)"):r.a.createElement("div",{className:"w3-container",style:{display:"flex",justifyContent:"center",flexWrap:"wrap",minHeight:"100vh"}},r.a.createElement("div",{className:"w3-container",style:{display:"flex",flexDirection:"column",justifyContent:"center"}},r.a.createElement("div",{id:"youtube-player"})),r.a.createElement("div",{className:"w3-container w3-mobile",style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"stretch",padding:"0.2rem",minWidth:"30vw"}},r.a.createElement("input",{className:"w3-input",onChange:function(t){var a=t.target.value;e.setState({url:a})},placeholder:"Enter youtube url to add to list",value:this.state.url,onKeyDown:this.handleEnter}),!!this.state.videoIds.length&&r.a.createElement("ul",{className:"w3-ul w3-border w3-card w3-mobile",style:{marginTop:"0.2rem",maxHeight:"90vh",overflow:"auto"}},this.state.loadingVideoIds?r.a.createElement(x,null):this.state.videoIds.map(function(t,a){var n="https://www.youtube.com/watch?v=".concat(t);return r.a.createElement("li",{key:"".concat(t,"-").concat(a),className:e.state.current===t?"w3-blue":"",style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},r.a.createElement("span",{className:"w3-btn w3-hover-".concat(e.state.current===t?"red":"green"),onClick:function(){return e.setPlayBack(t)}},e.state.current===t?"\ud83d\ude0e":"\ud83d\ude34"),r.a.createElement("a",{href:n},n))}))))}}]),t}(r.a.Component);i.a.render(r.a.createElement(E,null),document.getElementById("root"))}},[[18,1,2]]]);